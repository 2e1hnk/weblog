<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
	<title>Weblog</title>
	
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" th:href="@{/webjars/foundation/dist/css/foundation.min.css}">
	<link rel="stylesheet" th:href="@{/css/app.css}">
	<link rel="stylesheet" th:href="@{/webjars/foundation-icon-fonts/foundation-icons.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/webjars/leaflet/leaflet.css}" />
	
	<!-- favicon -->
	<link rel="apple-touch-icon" sizes="57x57" th:href="@{/apple-icon-57x57.png}">
	<link rel="apple-touch-icon" sizes="60x60" th:href="@{/apple-icon-60x60.png}">
	<link rel="apple-touch-icon" sizes="72x72" th:href="@{/apple-icon-72x72.png}">
	<link rel="apple-touch-icon" sizes="76x76" th:href="@{/apple-icon-76x76.png}">
	<link rel="apple-touch-icon" sizes="114x114" th:href="@{/apple-icon-114x114.png}">
	<link rel="apple-touch-icon" sizes="120x120" th:href="@{/apple-icon-120x120.png}">
	<link rel="apple-touch-icon" sizes="144x144" th:href="@{/apple-icon-144x144.png}">
	<link rel="apple-touch-icon" sizes="152x152" th:href="@{/apple-icon-152x152.png}">
	<link rel="apple-touch-icon" sizes="180x180" th:href="@{/apple-icon-180x180.png}">
	<link rel="icon" type="image/png" sizes="192x192" th:href="@{/android-icon-192x192.png}">
	<link rel="icon" type="image/png" sizes="32x32" th:href="@{/favicon-32x32.png}">
	<link rel="icon" type="image/png" sizes="96x96" th:href="@{/favicon-96x96.png}">
	<link rel="icon" type="image/png" sizes="16x16" th:href="@{/favicon-16x16.png}">
	<link rel="manifest" th:href="@{/manifest.json}">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" th:content="@{/ms-icon-144x144.png}">
	<meta name="theme-color" content="#ffffff">
	
	<!-- fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap" rel="stylesheet">
	
	<style>
		input.monospace {
			font-family: 'Roboto Mono', monospace;
		}
		.monospace {
			font-family: 'Roboto Mono', monospace;
		}
		#map { height: 600px; }
	</style>
</head>
<body>

	<!-- navbar -->
	<div class="top-bar">
		<div class="top-bar-left">
			<ul class="dropdown menu" data-dropdown-menu>
				<li class="menu-text">WebLog</li>
				<li><a href="#">File</a>
					<ul class="menu vertical">
						<li><a href="/file">Import ADIF File</a></li>
						<li><a href="/file/download">Export Log as ADIF File</a></li>
						<li><a href="#">Three</a></li>
					</ul></li>
				
				
				<li class="settings">
					<div class="switch tiny" style="margin-bottom: 0px; top: 5px;">
						<input class="switch-input" id="liveSwitch" type="checkbox" name="liveSwitch" />
						<label class="switch-paddle" for="liveSwitch">
							<span class="show-for-sr">Live logging?</span>
							<span class="switch-active" aria-hidden="true" th:text="#{lang.live}"></span>
							<span class="switch-inactive" aria-hidden="true" th:text="#{lang.edit}"></span>
						</label>
					</div>
				</li>
				<li>
					<form action="/log/find" method="get">
						<div class="input-group input-group-no-margin">
							<input class="input-group-field" type="search" placeholder="Search" name="q" />
							<div class="input-group-button">
						    	<input type="submit" class="button" value="Go" />
							</div>
						</div>
					</form>
				</li>
			</ul>
		</div>
		<div class="top-bar-right">
			<ul class="menu tabs" data-tabs id="view-tabs">
			  <li class="tabs-title is-active"><a href="#tab-list" aria-selected="true"><i class="fi-list"></i> <span th:text="#{lang.list}"></span></a></li>
			  <li class="tabs-title"><a data-tabs-target="tab-map" href="#tab-map"><i class="fi-map"></i> <span th:text="#{lang.map}"></span></a></li>
			</ul>
		</div>
	</div>
	<!-- end navbar -->

	<!-- content pane -->
	<div class="grid-x">
		<div class="cell small-12 medium-4 large-3">
			<!-- input panel tabs -->
			<ul class="tabs" data-tabs id="input-panel-tabs">
			  <li class="tabs-title is-active"><a href="#logging" aria-selected="true">Logging</a></li>
			  <li class="tabs-title"><a data-tabs-target="rigctl" href="#rigctl">Rig Control <span id="rigctl-indicator"></span></a></li>
			</ul>
			<div class="tabs-content" data-tabs-content="input-panel-tabs">
  				<div class="tabs-panel is-active" id="logging">
					<form action="#" autocomplete="off" th:action="${submitUrl} ? ${submitUrl} : @{/log/addcontact}" th:object="${contact}"
						method="post">
						<div class="grid-container">
							<div class="grid-x grid-padding-x">
								<div class="cell small-12">
									<label for="datetime"><span th:text="#{lang.date_time}"></span>
										<input type="datetime" class="input-group-field monospace" th:field="*{timestamp}" id="timestamp" placeholder="Date/Time" ondblclick="javascript: document.getElementById('timestamp').value=new Date()" />
									</label>
									<div class="callout alert small" th:if="${#fields.hasErrors('timestamp')}"	th:errors="*{timestamp}"></div>
								</div>
								<div class="cell small-12">
									<label for="callsign"><span th:text="#{lang.callsign}"></span>
										<input type="text" class="monospace uppercase" th:field="*{callsign}" id="callsign" placeholder="Callsign" />
									</label>
									<div class="callout alert small" th:if="${#fields.hasErrors('callsign')}" th:errors="*{callsign}"></div>
								</div>
								<div class="cell small-12 medium-6">
									<label for="rsts"><span th:text="#{lang.report_sent}"></span>
										<input type="text" class="monospace" th:field="*{rsts}" id="rsts" value="59" />
									</label>
								</div>
								<div class="cell small-12 medium-6">
									<label for="rsts"><span th:text="#{lang.report_received}"></span>
										<input type="text" class="monospace" th:field="*{rstr}" id="rstr" value="59" />
									</label>
								</div>
								<div class="cell small-12 medium-6">
									<label for="location"><span th:text="#{lang.location}"></span>
										<input type="text" class="monospace" th:field="*{location}" id="location" />
									</label>
								</div>
								<div class="cell small-12 medium-6">
									<label for="name"><span th:text="#{lang.name}"></span>
										<input type="text" class="monospace" th:field="*{name}" id="name" />
									</label>
								</div>
								<div class="cell small-12 medium-6">
									<label for="frequency"><span th:text="#{lang.frequency}"></span>
										<input type="text" class="monospace" th:field="*{frequency}" data-item-id="frequency" />
									</label>
								</div>
								<div class="cell small-6 medium-6">
									<label for="band"><span th:text="#{lang.band}"></span>
										<input type="text" class="monospace" th:field="*{band}" id="band" />
									</label>
								</div>
								<div class="cell small-6 medium-6">
									<label for="mode"><span th:text="#{lang.mode}"></span>
										<input type="text" class="monospace uppercase" th:field="*{mode}" data-item-id="mode" />
									</label>
								</div>
								<div class="cell small-6 medium-6">
									<label for="opName"><span th:text="#{lang.opname}"></span>
										<input type="text" class="monospace" th:field="*{opName}" data-item-id="opName" />
									</label>
								</div>
								<div class="cell small-12">
								    <legend><span th:text="#{lang.qsl}"></span></legend>
								    <div class="button-group">
								        <input id="qsl_req" type="checkbox" th:field="*{qsl_req}">
									    <label class="button" for="qsl_req" th:text="#{lang.requested}">Req</label>
									    
									    <input id="qsl_sent" type="checkbox" th:field="*{qsl_sent}">
									    <label class="button" for="qsl_sent" th:text="#{lang.sent}">Sent</label>
									    
									    <input id="qsl_rcvd" type="checkbox" th:field="*{qsl_rcvd}">
									    <label class="button" for="qsl_rcvd" th:text="#{lang.received}">Rcvd</label>
									</div>
								</div>
								<div class="cell small-12">
									<input type="submit" class="button" th:value="#{lang.log}">
								</div>
							</div>
						</div>
					</form>
				</div>
				<div class="tabs-panel" id="rigctl">
					<button type="button" id="connect-1" class="button">Connect to Rig 1</button><br />
				    <button type="button" id="connect-2" class="button">Connect to Rig 2</button><br />
				    <button type="button" id="disconnect" class="button" disabled="disabled">Disconnect</button><br />
				</div>
			</div>
		</div>
		<div class="cell small-12 medium-8 large-9">
			<div data-tabs-content="view-tabs">
  				<div class="tabs-panel is-active" id="tab-list">
  					<ul class="accordion" data-accordion data-allow-all-closed="true">
  						<li class="accordion-item is-active" data-accordion-item>
  							<a href="#" class="accordion-title"><span th:text="#{lang.callbook}"></span> <span id="callbook-status"></span></a>
  							<div class="accordion-content" data-tab-content>
			  					<div class="grid-x">
			  						<div class="cell small-12 medium-9">
			  							<div>
			  								<span id="callbook-tag-qslmgr" class="label warning" style="visibility: hidden"></span>
				  							<span id="callbook-tag-lotw" class="label primary" style="visibility: hidden">LoTW</span>
				  							<span id="callbook-tag-eqsl" class="label secondary" style="visibility: hidden">eQSL AG</span>
				  							<span id="callbook-tag-clublog" class="label success" style="visibility: hidden">Clublog User</span>
			  							</div>
			  							<div>
				  							<span id="callbook-name" class="monospace"></span> <span id="callbook-callsign" class="monospace"></span> <span id="callbook-aliases" class="monospace"></span><br />
				  							<span id="callbook-address" class="monospace"></span><br />
				  							<span id="callbook-grid" class="monospace"></span>
				  						</div>
			  						</div>
			  						<div class="cell small-12 medium-3">
			  							<img id="callbook-image" />
			  						</div>
			  					</div>
			  				</div>
			  			</li>
  						<li class="accordion-item" data-accordion-item>
  							<a href="#" class="accordion-title"><span th:text="#{lang.previous_contacts}"></span> <span class="badge secondary" id="previous-contacts-count"></span><span id="previous-contacts-status"></span></a>
  							<div class="accordion-content" data-tab-content>
			  					<div class="grid-x">
			  						<div class="cell small-12">
										<table id="previous-contacts">
											<thead>
												<tr class="monospace">
													<th><span th:text="#{lang.date_time}"></span></th>
													<th><span th:text="#{lang.report_sent}"></span></th>
													<th><span th:text="#{lang.report_received}"></span></th>
												</tr>
											</thead>
											<tbody>
											<tr></tr>
											</tbody>
										</table>
			  						</div>
			  					</div>
			  				</div>
			  			</li>
			  		</ul>
					<div th:switch="${contacts}">
						<div th:case="*">
							<table>
								<thead>
									<tr>
										<th><span th:text="#{lang.date_time}"></span></th>
										<th><span th:text="#{lang.callsign}"></span></th>
										<th><span th:text="#{lang.report_sent}"></span></th>
										<th><span th:text="#{lang.report_received}"></span></th>
										<th><span th:text="#{lang.band}"></span></th>
										<th><span th:text="#{lang.mode}"></span></th>
										<th><span th:text="#{lang.location}"></span></th>
										<th><span th:text="#{lang.name}"></span></th>
										<th colspan="2"><span th:text="#{lang.actions}"></span></th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="contact : ${contactList}" class="monospace">
										<td th:text="${contact.timestamp}"></td>
										<td th:text="${contact.callsign}"></td>
										<td th:text="${contact.rsts}"></td>
										<td th:text="${contact.rstr}"></td>
										<td th:text="${contact.band}"></td>
										<td th:text="${contact.mode}"></td>
										<td th:text="${contact.location}"></td>
										<td th:text="${contact.name}"></td>
										<td><a class="waves-effect waves-light btn-small"
											th:href="@{/log/edit/{id}(id=${contact.id})}"><i class="fi-pencil"></i></a></td>
										<td><a class="waves-effect waves-light btn-small"
											th:href="@{/log/delete/{id}(id=${contact.id})}"><i class="fi-trash"></i></a></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<nav aria-label="Pagination" th:if="${totalPages gt 0}">
					  <ul class="pagination text-center">
			            <li class="pagination-previous" th:classappend="${currentPage eq 1} ? 'disabled'">
			            	<a th:href="@{?page={page}(page=${currentPage lt 2 ? 1 : currentPage})}" aria-label="Previous page">Previous <span class="show-for-sr">page</span></a>
			            </li>
					    <li class="disabled ellipsis" th:if="${currentPage - 5 > 0}" aria-hidden="true">
				        </li>
				        <li class="page-item" th:classappend="${i eq currentPage} ? 'active'" th:each="i : ${#numbers.sequence( currentPage-5, totalPages > 10 + currentPage ? currentPage + 5 : totalPages, 1)}" th:if="${i>0 and i < totalPages}">
	                        <a class="page-link" th:href="@{|?page=${i}|}" th:text=${i}>1</a>
	                    </li>
	                    <li class="disabled ellipsis" th:if="${currentPage + 5 < totalPages}" aria-hidden="true">
				        </li>
					    <li class="pagination-next" th:classappend="${currentPage eq totalPages} ? 'disabled'">
					    	<a th:href="@{|?page=${currentPage+1}|}" aria-label="Next page">Next <span class="show-for-sr">page</span></a>
					    </li>
					  </ul>
					</nav>
				</div>
				<div class="tabs-panel" id="tab-map">
					<div id="map"></div>
				</div>
			</div>
		</div>
	</div>
	<!-- end content pane -->

	<!-- Compiled and minified JavaScript -->
	<!-- <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script> -->
	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script th:src="@{/webjars/foundation/dist/js/foundation.min.js}"></script>
	<script th:src="@{/webjars/sockjs-client/sockjs.min.js}"></script>
    <script th:src="@{/webjars/stomp-websocket/stomp.min.js}"></script>
	<script th:src="@{/webjars/momentjs/min/moment.min.js}"></script>
 	<script th:src="@{/webjars/leaflet/leaflet.js}"></script>
   	<script th:src="@{/js/rigctl-ws.js}"></script>
   	<script th:src="@{/js/L.MaidenheadColoured.js}"></script>
   	<script th:src="@{/js/app.js}"></script>
   	<script>

	</script>
</body>

</html>