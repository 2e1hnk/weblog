<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title th:text="${@environment.getProperty('INSTANCE_NAME')}">Weblog</title>

<!-- Compiled and minified CSS -->
<link rel="stylesheet" th:href="@{/webjars/w3-css/w3.css}">
<link rel="stylesheet" th:href="@{/webjars/font-awesome/css/all.min.css}">
<link rel="stylesheet" th:href="@{/css/scout.css}">
<link rel="stylesheet" th:href="@{/css/app.css}">
<link rel="stylesheet" th:href="@{/webjars/leaflet/leaflet.css}" />
<link rel="stylesheet" th:href="@{/css/L.fullscreen.css}" />
<link rel="stylesheet" th:href="@{/css/flag-icon.min.css}" />

<!-- favicon -->
<link rel="apple-touch-icon" sizes="57x57"
	th:href="@{/apple-icon-57x57.png}">
<link rel="apple-touch-icon" sizes="60x60"
	th:href="@{/apple-icon-60x60.png}">
<link rel="apple-touch-icon" sizes="72x72"
	th:href="@{/apple-icon-72x72.png}">
<link rel="apple-touch-icon" sizes="76x76"
	th:href="@{/apple-icon-76x76.png}">
<link rel="apple-touch-icon" sizes="114x114"
	th:href="@{/apple-icon-114x114.png}">
<link rel="apple-touch-icon" sizes="120x120"
	th:href="@{/apple-icon-120x120.png}">
<link rel="apple-touch-icon" sizes="144x144"
	th:href="@{/apple-icon-144x144.png}">
<link rel="apple-touch-icon" sizes="152x152"
	th:href="@{/apple-icon-152x152.png}">
<link rel="apple-touch-icon" sizes="180x180"
	th:href="@{/apple-icon-180x180.png}">
<link rel="icon" type="image/png" sizes="192x192"
	th:href="@{/android-icon-192x192.png}">
<link rel="icon" type="image/png" sizes="32x32"
	th:href="@{/favicon-32x32.png}">
<link rel="icon" type="image/png" sizes="96x96"
	th:href="@{/favicon-96x96.png}">
<link rel="icon" type="image/png" sizes="16x16"
	th:href="@{/favicon-16x16.png}">
<link rel="manifest" th:href="@{/manifest.json}">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage"
	th:content="@{/ms-icon-144x144.png}">
<meta name="theme-color" content="#ffffff">

<!-- fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap"
	rel="stylesheet">

	<style>
	input.monospace {
		font-family: 'Roboto Mono', monospace;
	}
	
	.monospace {
		font-family: 'Roboto Mono', monospace;
	}
	
	#map {
		height: 600px;
	}
	</style>
</head>
<body>

	<!-- navbar -->
	<div class="w3-bar w3-scout">
		<button class="w3-bar-item w3-button navbar-button" id="left-menu-button" style="z-index:10002;" onclick="toggleLeftMenu()"><i class="fas fa-bars w3-large"></i></button>
		
		<a href="#" class="w3-bar-item w3-button">
			<img th:src="${@environment.getProperty('INSTANCE_LOGO_SRC')}" style="max-height: 20px; max-width: 20px" />
			<b th:text="${@environment.getProperty('INSTANCE_NAME')}">Weblog</b>
		</a>
		
		<button class="w3-bar-item w3-button w3-hide-small"><span class="w3-large" id="rigctl-indicator"></span></button>
		
		<button class="w3-button w3-right navbar-button" id="right-menu-button" onclick="toggleRightMenu()"><i class="fa fa-globe w3-large"></i></button>

		<div class="w3-dropdown-hover w3-right">
		    <button class="w3-button navbar-button"><i class="far fa-user-circle w3-large"></i></button>
		    <div class="w3-dropdown-content w3-card-4" style="right:0">
		    	<div class="w3-bar w3-center">
			    	<a href="?lang=en" class="w3-bar-item w3-button">
			    		<span class="flag-icon flag-icon-gb"></span>
			    	</a>
				    <a href="?lang=fr" class="w3-bar-item w3-button">
			    		<span class="flag-icon flag-icon-fr"></span>
			    	</a>
				    <a href="?lang=es" class="w3-bar-item w3-button">
			    		<span class="flag-icon flag-icon-es"></span>
			    	</a>
			        <a href="?lang=ru" class="w3-bar-item w3-button">
			    		<span class="flag-icon flag-icon-ru"></span>
			    	</a>
			        <a href="?lang=de" class="w3-bar-item w3-button">
			    		<span class="flag-icon flag-icon-de"></span>
			    	</a>
			        <a href="?lang=it" class="w3-bar-item w3-button">
			    		<span class="flag-icon flag-icon-it"></span>
			    	</a>
			    </div>
			    <div class="w3-bar-block">
				    <a href="#" class="w3-bar-item w3-button"><i class="fas fa-user-circle"></i> <span th:text="#{lang.updateProfile}"></span></a>
				    <hr />
				    <a href="/login?logout" class="w3-bar-item w3-button"><i class="fas fa-sign-out-alt"></i> <span th:text="#{lang.logout}"></span></a>
				</div>
		    </div>
		</div>

		<form style="margin-bottom: 0px;" action="/log/find" method="get">
			<button class="w3-bar-item w3-right w3-button w3-large w3-hide-small w3-scout-light w3-text-scout navbar-button" type="submit">
				<i class="fas fa-search"></i>
			</button>
			<input type="text"
				class="w3-bar-item w3-input w3-right w3-scout-light w3-hide-small"
				th:placeholder="#{lang.search}" name="q">
		</form>

	</div>
	<!-- end navbar -->
	
	<!-- Left sidebar menu (File import/export, settings etc.) -->
	<div class="w3-sidebar w3-card w3-animate-left" style="display:none;z-index:10001;" id="leftMenu">
		<div class="w3-bar">
		  <form style="margin-bottom: 0px; margin-top:10px; margin-left: 16px; margin-right: 16px" action="/log/find" method="get">
		  	<div class="w3-bar">
				<input type="text" style="width:268px; margin-right: 0px; height: 38px;"
					class="w3-bar-item w3-input w3-scout-light"
					th:placeholder="#{lang.search}" name="q">
				<button class="w3-bar-item w3-button w3-scout" type="submit" style="margin-left: 0px; height: 38px;">
					<i class="fas fa-search"></i>
				</button>
			</div>
		  </form>
		</div>
	  
	  <div class="w3-bar-block">
		  <h3 class="w3-bar-item"><i class="fas fa-digital-tachograph"></i> <span th:text="#{lang.rigCtl}"></span></h3>
		  	<div class="w3-show-inline-block">
			  	<div class="w3-bar" style="margin-left: 16px; margin-right: 16px">
				  	<button type="button" id="1" class="w3-btn w3-scout websocket-connect">Rig 1</button>
					<button type="button" id="2" class="w3-btn w3-scout websocket-connect">Rig 2</button>
					<button type="button" id="disconnect" class="w3-btn w3-scout" disabled="disabled" th:text="#{lang.disconnect}"></button>
				</div>
			</div>
		  
		  <h3 class="w3-bar-item"><i class="fas fa-cogs"></i> <span th:text="#{lang.settings}"></span></h3>
		  	<span class="w3-bar-item">
			  	<input class="w3-check" type="checkbox" checked="checked" id="liveSwitch">
				<label th:text="#{lang.liveLogging}"></label>
			</span>
			
		  <h3 class="w3-bar-item"><i class="fas fa-tools"></i> <span th:text="#{lang.admin}"></span></h3>
		  	<a href="/adif" class="w3-bar-item w3-button"><i class="fas fa-file-import"></i> <span th:text="#{lang.import}"></span> ADIF</a>
			<a href="/adif/download" class="w3-bar-item w3-button"><i class="fas fa-file-export"></i> <span th:text="#{lang.export}"></span> ADIF</a>
		  	<a href="/admin/users" class="w3-bar-item w3-button"><i class="fas fa-users"></i> <span th:text="#{lang.users}"></span></a>
		</div>
	</div>
	
	<!-- Overlay -->
	<div class="w3-overlay" id="page-overlay" onclick="closeLeftMenu()" style="cursor:pointer; z-index:10000; margin-top: 38px;"></div>
	
	<!-- Right sidebar menu (DX Cluster etc.) -->
	<div class="w3-sidebar w3-bar w3-card w3-animate-right" style="display:none;right:0;z-index: 9997;" id="rightMenu">
		<button class="w3-bar-item w3-button"><i class="fa fa-globe w3-xlarge"></i> <span th:text="#{lang.dxCluster}"></span> (<span class="w3-small" th:text="${@environment.getProperty('DXCLUSTER_HOST')}">[DX Cluster Hostname]</span>)</button>
  	  <table id="dx-cluster-table" class="w3-table-all">
	  	<thead>
	  		<tr>
	  			<th th:text="#{lang.time}"></th>
	  			<th th:text="#{lang.spotter}"></th>
	  			<th th:text="#{lang.dx}"></th>
	  			<th th:text="#{lang.freq}"></th>
	  		</tr>
	  	</thead>
	  	<tbody id="dx-spots">
	  		<tr>
	  		</tr>
	  	</tbody>
	  </table>
	</div>

	<!-- content pane -->
	<div class="w3-row">
		<div class="w3-container w3-quarter">
			<!-- Show/hide button (on mobile) -->
			<button onclick="toggleSmallPanel('log-input-header', 'log-input-form')" id="log-input-header" class="w3-button w3-block w3-left-align w3-hide-large w3-hide-medium"><i class="fas fa-chevron-down"></i> <span th:text="#{lang.showLogInput}"></span></button>
			
			<!-- input panel tabs content -->

				<form id="log-input-form" class="grid-container w3-hide-small" style="margin-top: 10px;" action="#" autocomplete="off"
					th:action="${submitUrl} ? ${submitUrl} : @{/log/addcontact}"
					th:object="${contact}" method="post">

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<label for="datetime"><span th:text="#{lang.date_time}"></span></label>
							<input class="w3-input w3-border monospace" type="datetime"
								th:field="*{timestamp}" id="timestamp" th:placeholder="#{lang.date_time}"
								ondblclick="javascript: document.getElementById('timestamp').value=new Date()" />
							<div class="callout alert small"
								th:if="${#fields.hasErrors('timestamp')}"
								th:errors="*{timestamp}"></div>
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<label for="callsign"><span th:text="#{lang.callsign}"></span></label>
							<input type="text" class="w3-input w3-border monospace uppercase"
								th:field="*{callsign}" id="callsign" th:placeholder="#{lang.callsign}" />
							<div class="callout alert small"
								th:if="${#fields.hasErrors('callsign')}" th:errors="*{callsign}"></div>
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<label for="rsts"><span th:text="#{lang.report_sent}"></span></label>
							<input type="text" class="w3-input w3-border monospace"
								th:field="*{rsts}" id="rsts" value="59" />
						</div>
						<div class="w3-container w3-cell">
							<label for="rsts"><span th:text="#{lang.report_received}"></span></label>
							<input type="text" class="w3-input w3-border monospace"
								th:field="*{rstr}" id="rstr" value="59" />
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<label for="location"><span th:text="#{lang.location}"></span></label>
							<input type="text" class="w3-input w3-border monospace"
								th:field="*{location}" id="location" />
						</div>
						<div class="w3-container w3-cell">
							<label for="name"><span th:text="#{lang.name}"></span></label> <input
								type="text" class="w3-input w3-border monospace"
								th:field="*{name}" id="name" />
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<label for="frequency"><span th:text="#{lang.frequency}"></span></label>
							<input type="text" class="w3-input w3-border monospace"
								th:field="*{frequency}" data-item-id="frequency" />
						</div>
						<div class="w3-container w3-cell">
							<label for="band"><span th:text="#{lang.band}"></span></label> <input
								type="text" class="w3-input w3-border monospace"
								th:field="*{band}" id="band" />
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<label for="mode"><span th:text="#{lang.mode}"></span></label> <input
								type="text" class="w3-input w3-border monospace uppercase"
								th:field="*{mode}" data-item-id="mode" />
						</div>
						<div class="w3-container w3-cell">
							<label for="opName"><span th:text="#{lang.opname}"></span></label>
							<input type="text" class="w3-input w3-border monospace"
								th:field="*{opName}" data-item-id="opName" />
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<fieldset class="fieldset">
								<legend>
									<span th:text="#{lang.qsl}"></span>
								</legend>
								<input class="w3-check" id="qsl_req" type="checkbox"
									th:field="*{qsl_req}"><label for="qsl_req"
									th:text="#{lang.requested}"></label><br /> <input
									class="w3-check" id="qsl_sent" type="checkbox"
									th:field="*{qsl_sent}"><label for="qsl_sent"
									th:text="#{lang.sent}"></label><br /> <input
									class="w3-check" id="qsl_rcvd" type="checkbox"
									th:field="*{qsl_rcvd}"><label for="qsl_rcvd"
									th:text="#{lang.received}"></label>
							</fieldset>
						</div>
					</div>

					<div class="w3-cell-row">
						<div class="w3-container w3-cell">
							<input type="submit" class="w3-button w3-scout w3-block"
								th:value="#{lang.log}">
						</div>
					</div>
				</form>
		</div>


		<!-- Info Div -->
		<div class="info-box">
			<div class="w3-row">
				<div class="w3-half w3-container">
					<div>
						<span id="callbook-tag-qslmgr" class="w3-tag w3-scout"
							style="visibility: hidden"></span> <span id="callbook-tag-lotw"
							class="w3-tag w3-scout-light" style="visibility: hidden">LoTW</span> <span
							id="callbook-tag-eqsl" class="w3-tag w3-scout-light"
							style="visibility: hidden">eQSL AG</span> <span
							id="callbook-tag-clublog" class="w3-tag w3-scout-light"
							style="visibility: hidden" th:text="#{lang.clublogUser}"></span>
					</div>
					<div>
						<span id="callbook-name" class="monospace"></span> <span
							id="callbook-callsign" class="monospace"></span> <span
							id="callbook-aliases" class="monospace"></span><br /> <span
							id="callbook-address" class="monospace"></span><br /> <span
							id="callbook-grid" class="monospace"></span>
					</div>
				</div>
				<div id="previous-contacts" class="w3-quarter w3-container"
					style="overflow: vertical;">
				</div>
				<div class="w3-quarter w3-container">
					<img id="callbook-image" class="img-responsive" />
				</div>
			</div>
		</div>

		<div class="w3-container w3-threequarter" style="margin-top: 10px;">
			<div class="w3-bar">
				<a href="#" id="tab-list" class="w3-bar-item w3-button w3-right"
					onclick="openTab('display-tabs-panel', 'display-tab-list')"><i class="fas fa-list"></i> <span th:text="#{lang.list}"></span></a>
				<a href="#" id="tab-map" class="w3-bar-item w3-button w3-right"
					onclick="openTab('display-tabs-panel', 'display-tab-map'); mymap.invalidateSize(); mymap.fitBounds(markerLayer.getBounds());"><i class="fas fa-map"></i> <span th:text="#{lang.map}"></span></a>
			</div>
			<div class="display-tabs-panel" id="display-tab-list">
				<div th:switch="${contacts}">
					<div class="w3-responsive" th:case="*">
						<table id="log-table" class="w3-table-all">
							<thead>
								<tr>
									<th><span th:text="#{lang.date_time}"></span></th>
									<th><span th:text="#{lang.callsign}"></span></th>
									<th><span th:text="#{lang.report_sent}"></span></th>
									<th><span th:text="#{lang.report_received}"></span></th>
									<th><span th:text="#{lang.band}"></span></th>
									<th><span th:text="#{lang.mode}"></span></th>
									<th><span th:text="#{lang.location}"></span></th>
									<th><span th:text="#{lang.name}"></span></th>
									<th colspan="2"><span th:text="#{lang.actions}"></span></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="contact : ${contactList}" class="monospace">
									<td th:text="${contact.timestamp}"></td>
									<td th:text="${contact.callsign}"></td>
									<td th:text="${contact.rsts}"></td>
									<td th:text="${contact.rstr}"></td>
									<td th:text="${contact.band}"></td>
									<td th:text="${contact.mode}"></td>
									<td th:text="${contact.location}"></td>
									<td th:text="${contact.name}"></td>
									<td><a th:href="@{/log/edit/{id}(id=${contact.id})}"><i
											class="fas fa-edit w3-text-scout"></i></a></td>
									<td><a th:href="@{/log/delete/{id}(id=${contact.id})}"><i
											class="fas fa-trash w3-text-scout"></i></a></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="w3-center" th:if="${totalPages gt 0}">
					<div class="w3-bar">
						<a
							th:href="@{?page={page}(page=${currentPage lt 2 ? 1 : currentPage})}"
							class="w3-bar-item w3-button" aria-label="Previous page"
							th:classappend="${currentPage eq 1} ? 'disabled'">&laquo;</a> <a
							class="w3-button disabled" th:if="${currentPage - 5 > 0}"
							aria-hidden="true">...</a> <a class="w3-button"
							th:classappend="${i eq currentPage} ? 'w3-scout'"
							th:each="i : ${#numbers.sequence( currentPage-5, totalPages > 10 + currentPage ? currentPage + 5 : totalPages, 1)}"
							th:if="${i>0 and i < totalPages}" th:href="@{|?page=${i}|}"
							th:text=${i}>1</a> <a class="w3-button disabled"
							th:if="${currentPage + 5 < totalPages}" aria-hidden="true">...</a>
						<a th:href="@{|?page=${currentPage+1}|}" aria-label="Next page"
							class="w3-button"
							th:classappend="${currentPage eq totalPages} ? 'disabled'">&raquo;</a>
					</div>
				</div>

			</div>
			<div class="display-tabs-panel" id="display-tab-map"
				style="display: none;">
				<div id="map"></div>
			</div>

		</div>
	</div>
	<!-- end content pane -->

	<!-- Compiled and minified JavaScript -->
	<!-- <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script> -->
	<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script th:src="@{/webjars/foundation/dist/js/foundation.min.js}"></script>
	<script th:src="@{/webjars/sockjs-client/sockjs.min.js}"></script>
	<script th:src="@{/webjars/stomp-websocket/stomp.min.js}"></script>
	<script th:src="@{/webjars/momentjs/min/moment.min.js}"></script>
	<script th:src="@{/webjars/leaflet/leaflet.js}"></script>
	<script th:src="@{/js/rigctl-ws.js}"></script>
	<script th:src="@{/js/L.MaidenheadColoured.js}"></script>
	<script th:src="@{/js/L.fullscreen.js}"></script>
	<script th:src="@{/js/L.icons.js}"></script>
	<script th:src="@{/js/app.js}"></script>
	<script th:src="@{/js/dx-cluster.js}"></script>
	<script>
		
	</script>
</body>

</html>